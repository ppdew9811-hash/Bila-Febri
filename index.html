<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pesan Sayang dari Febri</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            background: #000;
            touch-action: manipulation;
        }
        
        /* Video YouTube background */
        .video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            background: #000;
        }
        
        #youtubeIframe {
            width: 100vw;
            height: 100vh;
            border: none;
            pointer-events: none;
            opacity: 0.3;
        }
        
        /* Overlay untuk baca teks */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.6);
            z-index: -1;
        }
        
        /* Konten */
        .content {
            max-width: 90vw;
            width: 100%;
            background: rgba(0, 0, 0, 0.8);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            line-height: 1.6;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
            -webkit-overflow-scrolling: touch;
        }
        
        .message p {
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .signature {
            color: #ff4081;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 64, 129, 0.3);
        }
        
        /* Tombol besar untuk mobile */
        .mobile-play-button {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ff4081, #ff80ab);
            color: white;
            border: none;
            padding: 22px 35px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 64, 129, 0.5);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 90%;
            max-width: 400px;
            z-index: 100;
            touch-action: manipulation;
            animation: pulseMobile 2s infinite;
        }
        
        .mobile-play-button:active {
            transform: translateX(-50%) scale(0.98);
            box-shadow: 0 5px 20px rgba(255, 64, 129, 0.4);
        }
        
        .mobile-play-button.playing {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            animation: none;
        }
        
        .mobile-play-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        @keyframes pulseMobile {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
            100% { transform: translateX(-50%) scale(1); }
        }
        
        .button-icon {
            font-size: 1.8rem;
        }
        
        /* Loading indicator */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.2rem;
            text-align: center;
            z-index: 101;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px 30px;
            border-radius: 15px;
            display: none;
        }
        
        /* Responsif untuk berbagai ukuran HP */
        @media (max-width: 480px) {
            .content {
                padding: 20px 15px;
                margin-bottom: 15px;
                max-height: 70vh;
                overflow-y: auto;
            }
            
            .message p {
                font-size: 1rem;
                margin-bottom: 15px;
            }
            
            .mobile-play-button {
                padding: 20px;
                font-size: 1.2rem;
                bottom: 20px;
            }
            
            #youtubeIframe {
                opacity: 0.2;
            }
        }
        
        @media (max-height: 700px) {
            .content {
                max-height: 60vh;
                overflow-y: auto;
            }
            
            .mobile-play-button {
                padding: 18px;
                font-size: 1.1rem;
                bottom: 15px;
            }
        }
        
        /* Scrollbar custom untuk mobile */
        .content::-webkit-scrollbar {
            width: 5px;
        }
        
        .content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .content::-webkit-scrollbar-thumb {
            background: rgba(255, 64, 129, 0.5);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- Video YouTube -->
    <div class="video-container">
        <iframe id="youtubeIframe" 
                frameborder="0" 
                allowfullscreen
                allow="autoplay; encrypted-media">
        </iframe>
    </div>
    
    <!-- Overlay gelap -->
    <div class="overlay"></div>
    
    <!-- Loading -->
    <div class="loading" id="loading">
        <div style="font-size: 2rem; margin-bottom: 10px;">üéµ</div>
        Memuat musik...
    </div>
    
    <!-- Pesan -->
    <div class="content">
        <div class="message">
            <p>Sayang, aku tahu UAS bikin kamu cemas, tapi aku percaya kamu jauh lebih kuat dari yang kamu pikirkan. Kamu sudah belajar, kamu sudah berusaha, dan itu sudah cukup untuk membuatmu melangkah dengan tenang.</p>
            <p>Nggak apa-apa kalau kamu merasa belum siap, yang penting kamu mau maju pelan-pelan. Kamu nggak sendirian. Kamu pasti bisa, cintaku. <span style="color:#e91e63;font-size:1.5rem;">ü§ç‚ú®</span></p>
            <p class="signature">With love - Febri</p>
        </div>
    </div>
    
    <!-- TOMBOL BESAR UNTUK MOBILE -->
    <button class="mobile-play-button" id="playButton">
        <span class="button-icon">‚ñ∂Ô∏è</span>
        <span>TAP UNTUK PUTAR MUSIK</span>
    </button>

    <script>
        // VIDEO: https://www.youtube.com/watch?v=HEAn4FqXFY4
        const videoId = 'HEAn4FqXFY4';
        let isPlaying = false;
        let youtubePlayer = null;
        
        // Fungsi untuk mobile touch
        function handleMobileTouch() {
            const playButton = document.getElementById('playButton');
            const loading = document.getElementById('loading');
            const iframe = document.getElementById('youtubeIframe');
            
            // Set iframe source (muted autoplay untuk mobile)
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&loop=1&playlist=${videoId}&controls=0&showinfo=0&modestbranding=1&rel=0&playsinline=1`;
            
            console.log("YouTube iframe dimuat (muted)");
            
            // Event listener untuk tombol (TOUCH FRIENDLY)
            playButton.addEventListener('touchstart', function(e) {
                e.preventDefault(); // Prevent default touch behavior
                playButton.style.transform = 'translateX(-50%) scale(0.98)';
            }, { passive: false });
            
            playButton.addEventListener('touchend', function(e) {
                e.preventDefault();
                playButton.style.transform = 'translateX(-50%) scale(1)';
                startVideoWithSound();
            }, { passive: false });
            
            // Juga support click (untuk desktop/testing)
            playButton.addEventListener('click', function(e) {
                e.preventDefault();
                startVideoWithSound();
            });
            
            // Fungsi untuk mulai video dengan suara
            function startVideoWithSound() {
                if (isPlaying) return;
                
                console.log("Mencoba memutar dengan suara...");
                loading.style.display = 'block';
                playButton.disabled = true;
                playButton.innerHTML = '<span class="button-icon">‚è≥</span><span>MEMUAT...</span>';
                
                // TRICK UNTUK MOBILE: Gunakan window.open untuk YouTube app
                setTimeout(() => {
                    // Coba beberapa teknik berbeda untuk mobile
                    
                    // Technique 1: Coba unmute iframe yang ada
                    try {
                        iframe.contentWindow.postMessage('{"event":"command","func":"unMute","args":""}', '*');
                        iframe.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                        console.log("Coba unmute via postMessage");
                    } catch(e) {
                        console.log("Error technique 1:", e);
                    }
                    
                    // Technique 2: Reload iframe tanpa muted parameter
                    setTimeout(() => {
                        iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&loop=1&playlist=${videoId}&controls=0&showinfo=0&playsinline=1`;
                        console.log("Reload iframe tanpa mute");
                    }, 500);
                    
                    // Technique 3: Untuk mobile, buka YouTube app
                    setTimeout(() => {
                        // Cek jika di mobile
                        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                        
                        if (isMobile && !isPlaying) {
                            console.log("Mobile detected, try opening YouTube app");
                            // Buka YouTube app atau browser YouTube
                            window.location.href = `https://www.youtube.com/watch?v=${videoId}&autoplay=1`;
                            return;
                        }
                    }, 1000);
                    
                    // Technique 4: Fallback - ganti dengan audio saja
                    setTimeout(() => {
                        if (!isPlaying) {
                            console.log("Fallback: audio only");
                            // Sembunyikan video, mainkan audio saja
                            iframe.style.display = 'none';
                            
                            // Buat audio element
                            const audio = document.createElement('audio');
                            audio.autoplay = true;
                            audio.loop = true;
                            audio.volume = 0.7;
                            // Audio dari sumber lain (contoh: relaxing music)
                            audio.src = 'https://assets.codepen.io/1468070/relaxing-piano.mp3';
                            document.body.appendChild(audio);
                            
                            audio.play().then(() => {
                                successPlay();
                            }).catch(() => {
                                // Jika masih gagal, tampilkan instruksi
                                playButton.innerHTML = '<span class="button-icon">üîä</span><span>TEKAN LAGI UNTUK SUARA</span>';
                                playButton.disabled = false;
                                loading.style.display = 'none';
                            });
                        }
                    }, 2000);
                    
                }, 300);
                
                // Fungsi ketika berhasil
                function successPlay() {
                    isPlaying = true;
                    loading.style.display = 'none';
                    playButton.innerHTML = '<span class="button-icon">üîä</span><span>MUSIK BERMAIN</span>';
                    playButton.classList.add('playing');
                    playButton.disabled = true;
                    
                    // Enable kembali setelah 3 detik untuk pause
                    setTimeout(() => {
                        playButton.disabled = false;
                        playButton.innerHTML = '<span class="button-icon">‚è∏Ô∏è</span><span>TAP UNTUK JEDA</span>';
                        
                        // Tambah event untuk pause
                        playButton.addEventListener('click', function pauseHandler() {
                            if (isPlaying) {
                                // Coba pause video
                                try {
                                    iframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                                } catch(e) {}
                                
                                // Pause audio jika ada
                                const audio = document.querySelector('audio');
                                if (audio) audio.pause();
                                
                                isPlaying = false;
                                playButton.innerHTML = '<span class="button-icon">‚ñ∂Ô∏è</span><span>TAP UNTUK MAIN</span>';
                                playButton.classList.remove('playing');
                            } else {
                                // Coba play lagi
                                try {
                                    iframe.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                                } catch(e) {}
                                
                                const audio = document.querySelector('audio');
                                if (audio) audio.play();
                                
                                isPlaying = true;
                                playButton.innerHTML = '<span class="button-icon">‚è∏Ô∏è</span><span>TAP UNTUK JEDA</span>';
                                playButton.classList.add('playing');
                            }
                        });
                    }, 3000);
                    
                    console.log("Video/audio berhasil diputar!");
                }
            }
            
            // Auto-hide loading setelah 5 detik
            setTimeout(() => {
                loading.style.display = 'none';
            }, 5000);
            
            // Deteksi jika video mulai (untuk beberapa browser)
            window.addEventListener('message', function(event) {
                if (event.data && event.data.info === 'videoStarted') {
                    successPlay();
                }
            });
        }
        
        // Inisialisasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', handleMobileTouch);
        
        // Handle orientation change di mobile
        window.addEventListener('orientationchange', function() {
            setTimeout(() => {
                // Reset tombol position setelah rotasi
                const playButton = document.getElementById('playButton');
                playButton.style.transform = 'translateX(-50%) scale(1)';
            }, 300);
        });
        
        // Prevent pull-to-refresh di mobile
        document.addEventListener('touchmove', function(e) {
            if (e.scale !== 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
    </script>
</body>
</html>
