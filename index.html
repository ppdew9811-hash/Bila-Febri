<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pesan Sayang dari Febri</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px;
            position: relative;
            overflow-x: hidden;
            background: #000;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Video YouTube background */
        #youtubeBackground {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            pointer-events: none;
        }
        
        /* Overlay untuk baca teks */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }
        
        /* Konten */
        .container {
            width: 100%;
            max-width: 95vw;
            background: rgba(0, 0, 0, 0.8);
            padding: 25px 20px;
            border-radius: 12px;
            text-align: center;
            line-height: 1.6;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
            overflow-wrap: break-word;
            word-wrap: break-word;
        }
        
        .message p {
            margin-bottom: 20px;
            font-size: 1.1rem;
            text-align: justify;
            hyphens: auto;
        }
        
        .signature {
            color: #ff4081;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 64, 129, 0.3);
            text-align: center;
        }
        
        /* Tombol utama */
        .play-button {
            background: linear-gradient(45deg, #ff4081, #ff80ab);
            color: white;
            border: none;
            padding: 16px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 64, 129, 0.4);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            animation: pulse 2s infinite;
            width: 90%;
            max-width: 350px;
            margin: 0 auto;
            -webkit-tap-highlight-color: rgba(255, 64, 129, 0.5);
        }
        
        .play-button:hover,
        .play-button:active {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(255, 64, 129, 0.6);
        }
        
        .play-button.playing {
            background: linear-gradient(45deg, #4CAF50, #2E7D32);
            animation: none;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        .button-text {
            font-weight: bold;
            font-size: 1rem;
        }
        
        /* Responsif untuk layar kecil */
        @media (max-width: 480px) {
            .container {
                padding: 20px 15px;
                margin: 10px 0 15px 0;
            }
            
            .message p {
                font-size: 1rem;
                margin-bottom: 15px;
                line-height: 1.5;
            }
            
            .signature {
                font-size: 1.1rem;
                margin-top: 20px;
                padding-top: 15px;
            }
            
            .play-button {
                padding: 14px 25px;
                font-size: 1rem;
                width: 95%;
            }
            
            .button-text {
                font-size: 0.95rem;
            }
        }
        
        /* Untuk layar sangat kecil (iPhone SE dll) */
        @media (max-width: 320px) {
            .message p {
                font-size: 0.95rem;
            }
            
            .play-button {
                padding: 12px 20px;
                font-size: 0.95rem;
            }
            
            .button-text {
                font-size: 0.9rem;
            }
        }
        
        /* Orientasi landscape */
        @media (max-height: 500px) and (orientation: landscape) {
            body {
                padding: 10px;
                justify-content: flex-start;
            }
            
            .container {
                margin-top: 10px;
                padding: 15px;
                max-width: 90vw;
            }
            
            .play-button {
                margin-top: 10px;
                margin-bottom: 10px;
            }
        }
        
        /* Loading indicator */
        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 25px;
            border-radius: 8px;
            z-index: 100;
            font-size: 1rem;
        }
        
        /* Notifikasi */
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 64, 129, 0.9);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            z-index: 100;
            font-size: 0.9rem;
            display: none;
            max-width: 90vw;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <!-- Loading indicator -->
    <div class="loading" id="loadingIndicator">Memuat video...</div>
    
    <!-- Notifikasi -->
    <div class="notification" id="notification"></div>
    
    <!-- Video YouTube -->
    <div id="youtubeBackground">
        <!-- Akan diisi JavaScript -->
    </div>
    
    <!-- Overlay gelap -->
    <div class="overlay"></div>
    
    <!-- Pesan -->
    <div class="container">
        <div class="message">
            <p>Sayang, aku tahu UAS bikin kamu cemas, tapi aku percaya kamu jauh lebih kuat dari yang kamu pikirkan. Kamu sudah belajar, kamu sudah berusaha, dan itu sudah cukup untuk membuatmu melangkah dengan tenang.</p>
            <p>Nggak apa-apa kalau kamu merasa belum siap, yang penting kamu mau maju pelan-pelan. Kamu nggak sendirian. Kamu pasti bisa, cintaku. ‚ù§Ô∏è</p>
            <p class="signature">With love - Febri</p>
        </div>
    </div>
    
    <!-- SATU TOMBOL SAJA -->
    <button class="play-button" id="startButton">
        <span style="font-size: 1.3rem;">‚ñ∂Ô∏è</span>
        <span class="button-text">PUTAR MUSIK & VIDEO</span>
    </button>

    <script>
        // VIDEO YANG DIMINTA: https://www.youtube.com/watch?v=HEAn4FqXFY4
        const videoId = 'HEAn4FqXFY4';
        let player;
        let isPlaying = false;
        
        // Tampilkan loading
        const loadingIndicator = document.getElementById('loadingIndicator');
        const notification = document.getElementById('notification');
        
        function showNotification(message, duration = 3000) {
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, duration);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const startButton = document.getElementById('startButton');
            const youtubeDiv = document.getElementById('youtubeBackground');
            
            // Load YouTube IFrame API
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            
            // Fungsi ketika YouTube API siap
            window.onYouTubeIframeAPIReady = function() {
                loadingIndicator.style.display = 'block';
                
                player = new YT.Player('youtubeBackground', {
                    height: '100%',
                    width: '100%',
                    videoId: videoId,
                    playerVars: {
                        'autoplay': 0, // Tidak autoplay dulu
                        'mute': 1, // Mute di awal
                        'loop': 1,
                        'playlist': videoId,
                        'controls': 0,
                        'showinfo': 0,
                        'modestbranding': 1,
                        'rel': 0,
                        'playsinline': 1 // Untuk iOS
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange,
                        'onError': onPlayerError
                    }
                });
            };
            
            function onPlayerReady(event) {
                console.log("YouTube Player siap");
                loadingIndicator.style.display = 'none';
                showNotification("Video siap diputar! üéµ", 2000);
            }
            
            function onPlayerStateChange(event) {
                if (event.data === YT.PlayerState.PLAYING) {
                    console.log("Video sedang diputar");
                    isPlaying = true;
                    updateButton();
                } else if (event.data === YT.PlayerState.PAUSED) {
                    console.log("Video dijeda");
                    isPlaying = false;
                    updateButton();
                }
            }
            
            function onPlayerError(event) {
                console.error("Error YouTube player:", event.data);
                loadingIndicator.style.display = 'none';
                showNotification("Gagal memuat video, coba lagi", 3000);
                
                // Fallback ke iframe biasa
                setupFallback();
            }
            
            // Fungsi untuk mulai mainkan video dengan suara
            function startVideoWithSound() {
                if (!player) return;
                
                console.log("Memulai video dengan suara...");
                loadingIndicator.style.display = 'block';
                loadingIndicator.textContent = "Memulai musik...";
                
                try {
                    // 1. Unmute video
                    player.unMute();
                    
                    // 2. Set volume ke 100%
                    player.setVolume(100);
                    
                    // 3. Play video
                    player.playVideo();
                    
                    // 4. Update tombol
                    startButton.innerHTML = '<span style="font-size: 1.3rem;">üîä</span><span class="button-text">MUSIK SEDANG BERMAIN</span>';
                    startButton.classList.add('playing');
                    startButton.disabled = true;
                    
                    // 5. Otomatis enable tombol lagi setelah 2 detik
                    setTimeout(() => {
                        startButton.disabled = false;
                        loadingIndicator.style.display = 'none';
                        showNotification("Musik dimulai! üé∂", 2000);
                    }, 2000);
                    
                    console.log("Video diputar dengan suara!");
                } catch (error) {
                    console.error("Error saat memutar video:", error);
                    loadingIndicator.style.display = 'none';
                    showNotification("Gagal memutar video", 3000);
                    startButton.disabled = false;
                }
            }
            
            // Fungsi update tombol
            function updateButton() {
                if (isPlaying) {
                    startButton.innerHTML = '<span style="font-size: 1.3rem;">‚è∏Ô∏è</span><span class="button-text">JEDA MUSIK</span>';
                    startButton.classList.add('playing');
                } else {
                    startButton.innerHTML = '<span style="font-size: 1.3rem;">‚ñ∂Ô∏è</span><span class="button-text">PUTAR MUSIK & VIDEO</span>';
                    startButton.classList.remove('playing');
                }
            }
            
            // Event listener untuk tombol
            startButton.addEventListener('click', function() {
                if (!player) {
                    console.log("Player belum siap, mencoba lagi...");
                    showNotification("Tunggu sebentar...", 2000);
                    return;
                }
                
                if (!isPlaying) {
                    startVideoWithSound();
                } else {
                    // Jika sudah playing, pause video
                    player.pauseVideo();
                    isPlaying = false;
                    updateButton();
                    showNotification("Musik dijeda ‚è∏Ô∏è", 2000);
                }
            });
            
            // Fallback jika YouTube API gagal
            function setupFallback() {
                console.log("Menggunakan fallback iframe biasa");
                
                // Buat iframe biasa
                const iframe = document.createElement('iframe');
                iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=0&mute=1&loop=1&playlist=${videoId}&controls=0&showinfo=0&modestbranding=1&rel=0&playsinline=1`;
                iframe.style.width = '100%';
                iframe.style.height = '100%';
                iframe.style.border = 'none';
                iframe.allow = 'autoplay; encrypted-media; accelerometer; gyroscope; picture-in-picture';
                iframe.allowFullscreen = true;
                
                youtubeDiv.appendChild(iframe);
                
                // Update fungsi tombol untuk iframe biasa
                startButton.addEventListener('click', function() {
                    if (!isPlaying) {
                        showNotification("Klik tombol play di video YouTube", 3000);
                        isPlaying = true;
                        startButton.innerHTML = '<span style="font-size: 1.3rem;">üîä</span><span class="button-text">MUSIK SEDANG BERMAIN</span>';
                        startButton.classList.add('playing');
                    }
                });
            }
            
            // Fallback setelah 5 detik
            setTimeout(() => {
                if (!player) {
                    setupFallback();
                    loadingIndicator.style.display = 'none';
                }
            }, 5000);
            
            // Mencegah zoom pada tombol di iOS
            document.addEventListener('touchstart', function(event) {
                if (event.target === startButton) {
                    event.preventDefault();
                }
            }, { passive: false });
            
            // Deteksi jika perangkat iOS
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            if (isIOS) {
                // Tambahkan pesan khusus untuk iOS
                showNotification("Di iOS, putar video mungkin memerlukan interaksi langsung", 4000);
            }
        });
    </script>
</body>
</html>
