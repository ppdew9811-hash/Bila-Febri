<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pesan Sayang dari Febri</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            background: #000;
            touch-action: manipulation;
        }
        
        /* VIDEO CONTAINER - PASTI TERLIHAT */
        .video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* VIDEO ELEMENT - BUKAN IFRAME */
        #backgroundVideo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.4;
            filter: brightness(0.6);
        }
        
        /* Video placeholder sebelum dimuat */
        .video-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.2rem;
            z-index: 1;
        }
        
        /* Overlay untuk baca teks */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: -1;
        }
        
        /* Konten */
        .content {
            max-width: 90vw;
            width: 100%;
            background: rgba(0, 0, 0, 0.75);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            line-height: 1.6;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
            margin-bottom: 20px;
            z-index: 10;
        }
        
        .message p {
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .signature {
            color: #ff4081;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 64, 129, 0.3);
        }
        
        /* TOMBOL UTAMA - BESAR UNTUK MOBILE */
        .main-button {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ff4081, #ff80ab);
            color: white;
            border: none;
            padding: 22px 35px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 35px rgba(255, 64, 129, 0.6);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 90%;
            max-width: 400px;
            z-index: 100;
            touch-action: manipulation;
        }
        
        .main-button:active {
            transform: translateX(-50%) scale(0.96);
            box-shadow: 0 5px 20px rgba(255, 64, 129, 0.4);
        }
        
        .main-button.playing {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            animation: none;
        }
        
        .main-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .button-icon {
            font-size: 1.8rem;
        }
        
        /* Progress bar untuk video */
        .video-progress {
            position: fixed;
            bottom: 100px;
            left: 5%;
            width: 90%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            z-index: 50;
            display: none;
        }
        
        .video-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff4081, #ff80ab);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Volume control */
        .volume-control {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
            backdrop-filter: blur(10px);
            display: none;
        }
        
        .volume-slider {
            width: 80px;
            -webkit-appearance: none;
            height: 4px;
            border-radius: 2px;
            background: rgba(255, 255, 255, 0.3);
            outline: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #ff4081;
            cursor: pointer;
        }
        
        /* Responsif */
        @media (max-width: 480px) {
            .content {
                padding: 20px 15px;
                margin-bottom: 15px;
                max-height: 60vh;
                overflow-y: auto;
            }
            
            .message p {
                font-size: 1rem;
                margin-bottom: 15px;
            }
            
            .main-button {
                padding: 20px;
                font-size: 1.2rem;
                bottom: 20px;
            }
            
            #backgroundVideo {
                opacity: 0.3;
            }
        }
        
        /* Animasi untuk konten */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .content {
            animation: fadeIn 0.8s ease-out;
        }
        
        .main-button {
            animation: fadeIn 1s ease-out 0.3s both;
        }
    </style>
</head>
<body>
    <!-- VIDEO BACKGROUND - VIDEO FILE LANGSUNG -->
    <div class="video-container">
        <video id="backgroundVideo" autoplay muted loop playsinline>
            <!-- VIDEO LANGSUNG DARI SUMBER - BUKAN YOUTUBE IFRAME -->
            <source src="https://assets.mixkit.co/videos/preview/mixkit-romantic-music-on-a-piano-5105-large.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="video-placeholder" id="videoPlaceholder">
            <div style="font-size: 3rem; margin-bottom: 10px;">üéµ</div>
            Video musik akan dimulai...
        </div>
    </div>
    
    <!-- Overlay gelap -->
    <div class="overlay"></div>
    
    <!-- Progress bar -->
    <div class="video-progress" id="videoProgress">
        <div class="video-progress-bar" id="progressBar"></div>
    </div>
    
    <!-- Volume control -->
    <div class="volume-control" id="volumeControl">
        <span style="font-size: 1.2rem;">üîä</span>
        <input type="range" min="0" max="100" value="70" class="volume-slider" id="volumeSlider">
    </div>
    
    <!-- Pesan -->
    <div class="content">
        <div class="message">
            <p>Sayang, aku tahu UAS bikin kamu cemas, tapi aku percaya kamu jauh lebih kuat dari yang kamu pikirkan. Kamu sudah belajar, kamu sudah berusaha, dan itu sudah cukup untuk membuatmu melangkah dengan tenang.</p>
            <p>Nggak apa-apa kalau kamu merasa belum siap, yang penting kamu mau maju pelan-pelan. Kamu nggak sendirian. Kamu pasti bisa, cintaku. ‚ù§Ô∏è</p>
            <p class="signature">With love - Febri</p>
        </div>
    </div>
    
    <!-- TOMBOL UTAMA -->
    <button class="main-button" id="playButton">
        <span class="button-icon">‚ñ∂Ô∏è</span>
        <span>TAP DISINI UNTUK MUSIK</span>
    </button>

    <script>
        // ELEMENTS
        const video = document.getElementById('backgroundVideo');
        const playButton = document.getElementById('playButton');
        const videoPlaceholder = document.getElementById('videoPlaceholder');
        const volumeControl = document.getElementById('volumeControl');
        const volumeSlider = document.getElementById('volumeSlider');
        const videoProgress = document.getElementById('videoProgress');
        const progressBar = document.getElementById('progressBar');
        
        // STATE
        let isPlaying = false;
        let hasUserInteracted = false;
        
        // INISIALISASI
        function init() {
            console.log("Inisialisasi aplikasi...");
            
            // Video sudah autoplay (muted) saat halaman dimuat
            video.play().then(() => {
                console.log("Video muted autoplay berhasil");
                videoPlaceholder.style.display = 'none';
            }).catch(error => {
                console.log("Video autoplay gagal:", error);
            });
            
            // Setup volume
            video.volume = 0.7;
            volumeSlider.value = 70;
            
            // Setup progress bar update
            video.addEventListener('timeupdate', updateProgressBar);
            
            // Setup volume control
            volumeSlider.addEventListener('input', function() {
                video.volume = this.value / 100;
            });
            
            // Setup tombol utama (TOUCH FRIENDLY)
            setupButton();
            
            // Tampilkan video progress bar
            videoProgress.style.display = 'block';
            
            // Auto-hide placeholder setelah 3 detik
            setTimeout(() => {
                videoPlaceholder.style.opacity = '0';
                setTimeout(() => {
                    videoPlaceholder.style.display = 'none';
                }, 500);
            }, 3000);
        }
        
        // SETUP TOMBOL
        function setupButton() {
            // Touch events untuk mobile
            playButton.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.style.transform = 'translateX(-50%) scale(0.96)';
            }, { passive: false });
            
            playButton.addEventListener('touchend', function(e) {
                e.preventDefault();
                this.style.transform = 'translateX(-50%) scale(1)';
                handlePlayButton();
            }, { passive: false });
            
            // Click event untuk desktop
            playButton.addEventListener('click', function(e) {
                e.preventDefault();
                handlePlayButton();
            });
        }
        
        // HANDLE TOMBOL PLAY
        function handlePlayButton() {
            if (!hasUserInteracted) {
                // INTERAKSI PERTAMA: Aktifkan suara
                activateSound();
                hasUserInteracted = true;
            } else {
                // INTERAKSI BERIKUTNYA: Play/Pause
                togglePlayPause();
            }
        }
        
        // AKTIFKAN SUARA
        function activateSound() {
            console.log("Mengaktifkan suara...");
            
            // Update tombol
            playButton.innerHTML = '<span class="button-icon">üîä</span><span>MENGATUR SUARA...</span>';
            playButton.disabled = true;
            
            // Unmute video
            video.muted = false;
            
            // Coba play dengan suara
            video.play().then(() => {
                console.log("Video dengan suara berhasil diputar!");
                
                // Tampilkan volume control
                volumeControl.style.display = 'flex';
                
                // Update tombol menjadi pause
                playButton.innerHTML = '<span class="button-icon">‚è∏Ô∏è</span><span>JEDA MUSIK</span>';
                playButton.classList.add('playing');
                playButton.disabled = false;
                isPlaying = true;
                
            }).catch(error => {
                console.log("Gagal play dengan suara:", error);
                
                // Fallback: Mute dulu, play, lalu unmute
                video.muted = true;
                video.play().then(() => {
                    setTimeout(() => {
                        video.muted = false;
                        console.log("Suara diaktifkan via fallback");
                        
                        volumeControl.style.display = 'flex';
                        playButton.innerHTML = '<span class="button-icon">‚è∏Ô∏è</span><span>JEDA MUSIK</span>';
                        playButton.classList.add('playing');
                        playButton.disabled = false;
                        isPlaying = true;
                    }, 300);
                });
            });
        }
        
        // TOGGLE PLAY/PAUSE
        function togglePlayPause() {
            if (isPlaying) {
                // PAUSE
                video.pause();
                playButton.innerHTML = '<span class="button-icon">‚ñ∂Ô∏è</span><span>MAINKAN MUSIK</span>';
                playButton.classList.remove('playing');
                isPlaying = false;
            } else {
                // PLAY
                video.play().then(() => {
                    playButton.innerHTML = '<span class="button-icon">‚è∏Ô∏è</span><span>JEDA MUSIK</span>';
                    playButton.classList.add('playing');
                    isPlaying = true;
                });
            }
        }
        
        // UPDATE PROGRESS BAR
        function updateProgressBar() {
            if (video.duration) {
                const progress = (video.currentTime / video.duration) * 100;
                progressBar.style.width = progress + '%';
            }
        }
        
        // LOAD VIDEO YOUTUBE ALTERNATIF (jika video lokal gagal)
        function loadYouTubeAlternative() {
            console.log("Mencoba video alternatif...");
            
            // Ganti dengan video dari sumber lain
            video.src = 'https://assets.mixkit.co/videos/preview/mixkit-waves-in-the-water-1164-large.mp4';
            video.load();
            video.play().catch(console.error);
        }
        
        // DETEKSI KONEKSI LAMBAT
        video.addEventListener('error', function(e) {
            console.log("Error video:", e);
            videoPlaceholder.innerHTML = '<div style="font-size: 3rem; margin-bottom: 10px;">‚ö†Ô∏è</div><div>Video tidak dapat dimuat<br><small>Memuat alternatif...</small></div>';
            
            setTimeout(loadYouTubeAlternative, 2000);
        });
        
        // VIDEO LOADED
        video.addEventListener('loadeddata', function() {
            console.log("Video berhasil dimuat");
            videoPlaceholder.style.opacity = '0';
            setTimeout(() => {
                videoPlaceholder.style.display = 'none';
            }, 500);
        });
        
        // JALANKAN SAAT HALAMAN SIAP
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
        
        // HANDLE PAGE VISIBILITY (pause saat tab tidak aktif)
        document.addEventListener('visibilitychange', function() {
            if (document.hidden && isPlaying) {
                video.pause();
                playButton.innerHTML = '<span class="button-icon">‚ñ∂Ô∏è</span><span>MAINKAN MUSIK</span>';
                playButton.classList.remove('playing');
                isPlaying = false;
            }
        });
        
        // PREVENT DEFAULT BEHAVIOR DI MOBILE
        document.addEventListener('touchmove', function(e) {
            if (e.scale !== 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // FULLSCREEN SUPPORT
        video.addEventListener('click', function() {
            if (video.requestFullscreen) {
                video.requestFullscreen();
            } else if (video.webkitRequestFullscreen) {
                video.webkitRequestFullscreen();
            } else if (video.mozRequestFullScreen) {
                video.mozRequestFullScreen();
            }
        });
        
    </script>
</body>
</html>
